{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DailySoul ‚Äî Login</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#e8f5e9;
      --bg2:#fff3e0;
      --accent:#77bfa3;
      --accent-dark:#5fa88d;
      --accent-light:#e8f5ef;
      --muted:#666;
      --card-bg:#ffffff;
      --radius:20px;
      --shadow:0 12px 40px rgba(0,0,0,0.08);
      --shadow-hover:0 20px 50px rgba(0,0,0,0.12);
    }

    *{box-sizing:border-box;margin:0;padding:0;}
    html,body{height:100%;}
    body{
      font-family:'Poppins',sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:40px 16px;
      min-height:100vh;
      color:#222;
      line-height:1.6;
    }

    .wrap{
      width:100%;
      max-width:980px;
      display:grid;
      grid-template-columns:1fr 500px;
      gap:40px;
      align-items:center;
    }

    .hero{
      background: linear-gradient(135deg, rgba(119,191,163,0.1), rgba(255,255,255,0.05));
      border-radius:var(--radius);
      padding:50px 40px;
      box-shadow:var(--shadow);
      min-height:480px;
      display:flex;
      align-items:center;
      justify-content:center;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255,255,255,0.3);
      backdrop-filter: blur(10px);
    }

    .hero::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent), #6fc17e);
      border-radius: var(--radius) var(--radius) 0 0;
    }

    .hero::after {
      content: "";
      position: absolute;
      bottom: -50px;
      right: -50px;
      width: 200px;
      height: 200px;
      background: radial-gradient(circle, rgba(119,191,163,0.1) 0%, rgba(255,255,255,0) 70%);
      border-radius: 50%;
    }

    .hero .inner{
      text-align:center;
      z-index: 2;
      width: 100%;
    }

    .hero-icon {
      font-size: 5rem;
      margin-bottom: 25px;
      display: block;
      animation: float 6s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(5deg); }
    }

    .hero h1{
      color:var(--accent);
      font-size:2.8rem;
      margin-bottom:20px;
      font-weight:700;
      background: linear-gradient(135deg, var(--accent), #5fa88a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero p {
      color: var(--muted);
      font-size: 1.2rem;
      margin-bottom: 15px;
      font-weight: 400;
    }

    .hero .subtext {
      color: var(--muted);
      font-size: 1rem;
      margin-bottom: 35px;
      opacity: 0.8;
    }

    .features {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 30px;
      text-align: left;
      max-width: 350px;
      margin-left: auto;
      margin-right: auto;
    }

    .feature-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 12px 18px;
      background: rgba(255,255,255,0.7);
      border-radius: 12px;
      border: 1px solid rgba(119,191,163,0.2);
      transition: all 0.3s ease;
    }

    .feature-item:hover {
      transform: translateX(5px);
      background: rgba(255,255,255,0.9);
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }

    .feature-icon {
      font-size: 1.5rem;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(119,191,163,0.1);
      border-radius: 10px;
    }

    .feature-text {
      flex: 1;
    }

    .feature-title {
      font-weight: 600;
      color: #2d5a3d;
      font-size: 0.95rem;
      margin-bottom: 2px;
    }

    .feature-desc {
      color: var(--muted);
      font-size: 0.85rem;
      opacity: 0.8;
    }

    .card{
      background:var(--card-bg);
      border-radius:var(--radius);
      padding:40px 35px;
      box-shadow:var(--shadow);
      border: 1px solid rgba(255,255,255,0.3);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-hover);
    }

    .card h2{
      color:#1a3a27;
      margin-bottom:8px;
      font-size: 1.8rem;
      font-weight: 600;
    }

    .muted{
      color:var(--muted);
      font-size:1rem;
      margin-bottom:20px;
    }

    form{
      display:flex;
      flex-direction:column;
      gap:20px;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    label{
      font-weight:600;
      color:#2d5a3d;
      font-size:0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .input{
      width:100%;
      padding:14px 16px;
      border-radius:12px;
      border:2px solid #e6efe6;
      font-size:1rem;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
      background: #fafdfa;
    }

    .input:focus{
      outline: none;
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(119,191,163,0.2);
      background: white;
      transform: translateY(-2px);
    }

    .pw-row{
      position: relative;
      display:flex;
      gap:8px;
      align-items:center;
    }

    .pw-toggle{
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      background:transparent;
      border:none;
      padding:8px;
      border-radius:8px;
      cursor:pointer;
      font-size: 1.1rem;
      transition: all 0.2s ease;
      z-index: 2;
    }

    .pw-toggle:hover {
      background: rgba(119,191,163,0.1);
      transform: translateY(-50%) scale(1.1);
    }

    .submit-btn{
      border:none;
      background:linear-gradient(135deg, var(--accent), #6fc17e);
      color:#fff;
      padding:16px;
      border-radius:12px;
      font-weight:600;
      cursor:pointer;
      font-size: 1rem;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s ease;
      margin-top: 10px;
      position: relative;
      overflow: hidden;
    }

    .submit-btn::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }

    .submit-btn:hover::before {
      left: 100%;
    }

    .submit-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(119,191,163,0.4);
      background: linear-gradient(135deg, var(--accent-dark), #5fb171);
    }

    .submit-btn:active {
      transform: translateY(-1px);
    }

    .submit-btn.loading {
      pointer-events: none;
      opacity: 0.8;
    }

    .meta{
      text-align:center;
      color:var(--muted);
      margin-top:20px;
      padding-top: 20px;
      border-top: 1px solid #f0f0f0;
    }

    .meta a{
      color:var(--accent-dark);
      font-weight:600;
      text-decoration:none;
      transition: color 0.3s ease;
    }

    .meta a:hover {
      color: var(--accent);
      text-decoration: underline;
    }

    .alert {
      padding: 12px 16px;
      border-radius: 10px;
      margin-bottom: 16px;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 8px;
      border-left: 4px solid;
    }

    .alert-error {
      background: #ffecec;
      color: #9b1b1b;
      border-left-color: #ff4444;
    }

    .alert-success {
      background: #eafaf0;
      color: #164e2a;
      border-left-color: var(--accent);
    }

    @media (max-width: 900px){
      .wrap{
        grid-template-columns:1fr;
        gap: 30px;
      }
      .hero{
        order: 2;
        padding: 40px 30px;
        min-height: auto;
      }
      .card {
        padding: 30px 25px;
      }
      .hero h1 {
        font-size: 2.2rem;
      }
    }

    @media (max-width: 480px) {
      body {
        padding: 20px 12px;
      }
      .hero {
        padding: 30px 20px;
      }
      .card {
        padding: 25px 20px;
      }
      .hero-icon {
        font-size: 4rem;
      }
      .hero h1 {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <aside class="hero">
      <div class="inner">
        <div class="hero-icon">üìñ</div>
        <h1>DailySoul</h1>
        <p>Your Journey to Mindful Living</p>
        <div class="subtext">Welcome back to your peaceful space for reflection</div>



      </div>
    </aside>

    <section class="card">
      <h2>Welcome back! üëã</h2>
      <div class="muted">Sign in to continue your DailySoul journey</div>

      {% if messages %}
        {% for m in messages %}
          <div class="alert {% if 'success' in m.tags %}alert-success{% else %}alert-error{% endif %}">
            <span>{% if 'success' in m.tags %}‚úÖ{% else %}‚ö†Ô∏è{% endif %}</span>
            {{ m }}
          </div>
        {% endfor %}
      {% endif %}

      <form method="POST" novalidate id="login-form">
        {% csrf_token %}

        <div class="form-group">
          <label for="id_username">
            <span>üë§</span>
            Username
          </label>
          <input
            id="id_username"
            class="input"
            type="text"
            name="username"
            placeholder="Enter your username"
            required
            autocomplete="username"
            autofocus
          >
        </div>

        <div class="form-group">
          <label for="id_password">
            <span>üîí</span>
            Password
          </label>
          <div class="pw-row">
            <input
              id="id_password"
              class="input"
              type="password"
              name="password"
              placeholder="Enter your password"
              required
              autocomplete="current-password"
              style="padding-right: 50px;"
            >
            <button type="button" class="pw-toggle" aria-label="Show password">üëÅÔ∏è</button>
          </div>
        </div>

        <button type="submit" class="submit-btn" id="submit-btn">
          Sign in to DailySoul
        </button>

        <div class="meta">
          New to DailySoul? <a href="{% url 'register' %}">Create your account</a>
        </div>
      </form>
    </section>
  </div>

<script>
  // Enhanced password toggle
  document.querySelectorAll('.pw-toggle').forEach(function(btn) {
    btn.addEventListener('click', function() {
      const row = btn.closest('.pw-row');
      if (!row) return;
      const input = row.querySelector('input');
      if (!input) return;

      const isPassword = input.type === 'password';
      input.type = isPassword ? 'text' : 'password';
      btn.textContent = isPassword ? 'üôà' : 'üëÅÔ∏è';
      btn.setAttribute('aria-label', isPassword ? 'Hide password' : 'Show password');

      // Add subtle animation
      btn.style.transform = 'translateY(-50%) scale(1.2)';
      setTimeout(() => {
        btn.style.transform = 'translateY(-50%) scale(1)';
      }, 200);
    });
  });

  // Form submission loading state
  document.getElementById('login-form').addEventListener('submit', function(e) {
    const submitBtn = document.getElementById('submit-btn');
    const originalText = submitBtn.innerHTML;

    submitBtn.innerHTML = 'Signing in...';
    submitBtn.classList.add('loading');
    submitBtn.disabled = true;

    // Re-enable after 5 seconds in case of error
    setTimeout(() => {
      submitBtn.innerHTML = originalText;
      submitBtn.classList.remove('loading');
      submitBtn.disabled = false;
    }, 5000);
  });

  // Add focus styles for better accessibility
  document.querySelectorAll('.input').forEach(input => {
    input.addEventListener('focus', function() {
      this.parentElement.classList.add('focused');
    });

    input.addEventListener('blur', function() {
      this.parentElement.classList.remove('focused');
    });
  });

  // Add floating animation to hero icon
  const heroIcon = document.querySelector('.hero-icon');
  if (heroIcon) {
    // Animation is already defined in CSS
  }
</script>
</body>
</html>